# Examples of failures to explain
The examples in this folder enable running **yRCA** to analyse examples of logs obtained by running a testbed application, called *Sock Echo*.

## Sock Echo
The deployed application mirrors the topology of [Sock Shop](https://microservices-demo.github.io/), from which the name *Sock Echo*.
It essentially consists of 14 interacting [Chaos Echo](https://github.com/di-unipi-socc/chaos-echo) services, configured to emulate the interactions between the services forming Sock Shop.

The runned instances of *Sock Echo* used in our examples were obtained by exploiting the configurable Docker Compose deployment in the [deploy](deploy) folder.

## Example:Â Orders Failure

The logs contained in the [orders-fail](orders-fail) folder were obtained by running an instance of the *Sock Echo* application, configured so that only the `orders` service was randomly failing, while all other services were loaded and interacted to simulate the traffic generated by application users.

The example considers a cascade of failures rooted in `orders`, which caused a cascading failure in `frontend`, which in turn caused a cascading failure in `edgeRouter`. To enable analysing the logs and reconstructing such cascading events, we provide the following files:
* [all.log](orders-fail/all.log) providing a dump of all log messages generated by the services in the example run,
* [event-edgeRouter.log](orders-fail/event-edgeRouter.log) providing the failure event logged by the `edgeRouter` service,
* [event-frontend.log](orders-fail/event-frontend.log) providing the failure event logged by the `frontend` service, and
* [event-orders.log](orders-fail/event-orders.log) providing the failure event logged by the `orders` service.

For running the analysis, starting from the root folder of this repository, please issue:
```
python3 yrca.py data/examples/sock-echo/orders-fail/event-<X>.log data/examples/sock-echo/orders-fail/all.log data/templates/chaos-echo.yml
```
with `<X>` substituted by the name of the service whose failure is to be explained (namely, `edgeRouter`, `frontend`, or `orders`). 

## Example: Shipping Failure

The logs contained in the [shipping-fail](shipping-fail) folder were obtained by running an instance of the *Sock Echo* application, configured so that only the `shipping` service was randomly failing, while all other services were loaded and interacted to simulate the traffic generated by application users.

The example considers a cascade of failures rooted in `shipping`, which caused a cascading failure in `orders`, which in turn caused a cascading failure in `frontend`, which finally caused a cascading failure in `edgeRouter`. To enable analysing the logs and reconstructing such cascading events, we provide the following files:
* [all.log](shipping-fail/all.log) providing a dump of all log messages generated by the services in the example run, and
* [event-edgeRouter.log](shipping-fail/event-edgeRouter.log) providing the failure event logged by the `edgeRouter` service.

For running the analysis, starting from the root folder of this repository, please issue:
```
python3 yrca.py data/examples/sock-echo/shipping-fail/event-edgeRouter.log data/examples/sock-echo/shipping-fail/all.log data/templates/chaos-echo.yml
```

## Example: Timeout Cascade

The logs contained in the [timeout-cascade](timeout-cascade) folder were obtained by running an instance of the *Sock Echo* application, configured so that `shipping` service was unreachable for a given amount of time, while all other services were loaded and interacted to simulate the traffic generated by application users.

The example considers a cascade of timeouts caused by the unreachability of `shipping`. The latter indeed caused a timeout failure in `orders`, which in turn caused a timeout failure in `frontend`, which finally caused a timeout failure in `edgeRouter`. To enable analysing the logs and reconstructing such cascading events, we provide the following files:
* [all.log](timeout-cascade/all.log) providing a dump of all log messages generated by the services in the example run, and
* [event.log](timeout-cascade/event.log) providing the timeout failure event logged by the `edgeRouter` service.

For running the analysis, starting from the root folder of this repository, please issue:
```
python3 yrca.py data/examples/sock-echo/timeout-cascade/event.log data/examples/sock-echo/timeout-cascade/all.log data/templates/chaos-echo.yml
```

## Example: Users & Shipping Failing

The logs contained in the [users-shipping-fail](users-shipping-fail) folder were obtained by running an instance of the *Sock Echo* application, configured so that the `users` and `shipping` services were randomly failing, while all other services were loaded and interacted to simulate the traffic generated by application users.

The example considers cascades of failures rooted in either `users` or `shipping`, which caused cascading failures eventuallly reaching `edgeRouter` and causing its failure. To enable analysing the logs and reconstructing such cascading events, we provide the following files:
* [all.log](users-shipping-fail/all.log) providing a dump of all log messages generated by the services in the example run, and
* [event.log](users-shipping-fail/event.log) providing the failure event logged by the `edgeRouter` service.

For running the analysis, starting from the root folder of this repository, please issue:
```
python3 yrca.py data/examples/sock-echo/users-shipping-fail/event-edgeRouter.log data/examples/sock-echo/users-shipping-fail/all.log data/templates/chaos-echo.yml
```

